@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>Index</h2>
<ul id="people">
</ul>
<form id="newPersonForm">
    <input type="text" name="Name" id="name"/>
    <input type="button" id="addButton" value="save" />
</form>
<script type="text/javascript">
    $(function () {
        loadPeople();
        $('#addButton').click(function () {
            $.post('/api/person',
                $('#newPersonForm').serialize(),
                function () {
                    $('#name').val('');
                    loadPeople();
            });
        });
    });

    function loadPeople() {
        $('#people li').remove();
        $.get('/api/person', function (data) {
            $(data).each(function (i, item) {
                $('#people').append('<li>' + item.Name + '</li>');
            });
        });
        $('#name').focus();
    }
</script>
